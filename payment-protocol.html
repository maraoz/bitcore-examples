<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Bitcore Payment Protocol browser usage</title>

  <script src="bower_components/bitcore/bitcore.min.js"></script>
  <script src="bower_components/bitcore-payment-protocol/bitcore-payment-protocol.min.js"></script>
</head>

<body>

  <script type="text/javascript">
    var bitcore = require('bitcore');
    var PaymentProtocol = require('bitcore-payment-protocol');

    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open("GET", 'https://test.bitpay.com/i/UEYwsx2f7cZs8xpA82mtEg', false);
    xmlHttp.send(null);
    var rawbody = xmlHttp.responseText;

    var body = PaymentProtocol.PaymentRequest.decode(rawbody);
    var request = new PaymentProtocol().makePaymentRequest(body);

    var version = pr.get('payment_details_version');
    var pki_type = pr.get('pki_type');
    var pki_data = pr.get('pki_data');
    var serializedDetails = pr.get('serialized_payment_details');
    var signature = pr.get('signature');

    // Verify the signature
    var verified = request.verify();
  </script>

</body>

</html>
